{"ast":null,"code":"/*!\n * imagesLoaded v5.0.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n(function (window, factory) {\n  // universal module definition\n  if (typeof module == 'object' && module.exports) {\n    // CommonJS\n    module.exports = factory(window, require('ev-emitter'));\n  } else {\n    // browser global\n    window.imagesLoaded = factory(window, window.EvEmitter);\n  }\n})(typeof window !== 'undefined' ? window : this, function factory(window, EvEmitter) {\n  let $ = window.jQuery;\n  let console = window.console; // -------------------------- helpers -------------------------- //\n  // turn element or nodeList into an array\n\n  function makeArray(obj) {\n    // use object if already an array\n    if (Array.isArray(obj)) return obj;\n    let isArrayLike = typeof obj == 'object' && typeof obj.length == 'number'; // convert nodeList to array\n\n    if (isArrayLike) return [...obj]; // array of single index\n\n    return [obj];\n  } // -------------------------- imagesLoaded -------------------------- //\n\n  /**\n   * @param {[Array, Element, NodeList, String]} elem\n   * @param {[Object, Function]} options - if function, use as callback\n   * @param {Function} onAlways - callback function\n   * @returns {ImagesLoaded}\n   */\n\n\n  function ImagesLoaded(elem, options, onAlways) {\n    // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n    if (!(this instanceof ImagesLoaded)) {\n      return new ImagesLoaded(elem, options, onAlways);\n    } // use elem as selector string\n\n\n    let queryElem = elem;\n\n    if (typeof elem == 'string') {\n      queryElem = document.querySelectorAll(elem);\n    } // bail if bad element\n\n\n    if (!queryElem) {\n      console.error(`Bad element for imagesLoaded ${queryElem || elem}`);\n      return;\n    }\n\n    this.elements = makeArray(queryElem);\n    this.options = {}; // shift arguments if no options set\n\n    if (typeof options == 'function') {\n      onAlways = options;\n    } else {\n      Object.assign(this.options, options);\n    }\n\n    if (onAlways) this.on('always', onAlways);\n    this.getImages(); // add jQuery Deferred object\n\n    if ($) this.jqDeferred = new $.Deferred(); // HACK check async to allow time to bind listeners\n\n    setTimeout(this.check.bind(this));\n  }\n\n  ImagesLoaded.prototype = Object.create(EvEmitter.prototype);\n\n  ImagesLoaded.prototype.getImages = function () {\n    this.images = []; // filter & find items if we have an item selector\n\n    this.elements.forEach(this.addElementImages, this);\n  };\n\n  const elementNodeTypes = [1, 9, 11];\n  /**\n   * @param {Node} elem\n   */\n\n  ImagesLoaded.prototype.addElementImages = function (elem) {\n    // filter siblings\n    if (elem.nodeName === 'IMG') {\n      this.addImage(elem);\n    } // get background image on element\n\n\n    if (this.options.background === true) {\n      this.addElementBackgroundImages(elem);\n    } // find children\n    // no non-element nodes, #143\n\n\n    let {\n      nodeType\n    } = elem;\n    if (!nodeType || !elementNodeTypes.includes(nodeType)) return;\n    let childImgs = elem.querySelectorAll('img'); // concat childElems to filterFound array\n\n    for (let img of childImgs) {\n      this.addImage(img);\n    } // get child background images\n\n\n    if (typeof this.options.background == 'string') {\n      let children = elem.querySelectorAll(this.options.background);\n\n      for (let child of children) {\n        this.addElementBackgroundImages(child);\n      }\n    }\n  };\n\n  const reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n\n  ImagesLoaded.prototype.addElementBackgroundImages = function (elem) {\n    let style = getComputedStyle(elem); // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n\n    if (!style) return; // get url inside url(\"...\")\n\n    let matches = reURL.exec(style.backgroundImage);\n\n    while (matches !== null) {\n      let url = matches && matches[2];\n\n      if (url) {\n        this.addBackground(url, elem);\n      }\n\n      matches = reURL.exec(style.backgroundImage);\n    }\n  };\n  /**\n   * @param {Image} img\n   */\n\n\n  ImagesLoaded.prototype.addImage = function (img) {\n    let loadingImage = new LoadingImage(img);\n    this.images.push(loadingImage);\n  };\n\n  ImagesLoaded.prototype.addBackground = function (url, elem) {\n    let background = new Background(url, elem);\n    this.images.push(background);\n  };\n\n  ImagesLoaded.prototype.check = function () {\n    this.progressedCount = 0;\n    this.hasAnyBroken = false; // complete if no images\n\n    if (!this.images.length) {\n      this.complete();\n      return;\n    }\n    /* eslint-disable-next-line func-style */\n\n\n    let onProgress = (image, elem, message) => {\n      // HACK - Chrome triggers event before object properties have changed. #83\n      setTimeout(() => {\n        this.progress(image, elem, message);\n      });\n    };\n\n    this.images.forEach(function (loadingImage) {\n      loadingImage.once('progress', onProgress);\n      loadingImage.check();\n    });\n  };\n\n  ImagesLoaded.prototype.progress = function (image, elem, message) {\n    this.progressedCount++;\n    this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded; // progress event\n\n    this.emitEvent('progress', [this, image, elem]);\n\n    if (this.jqDeferred && this.jqDeferred.notify) {\n      this.jqDeferred.notify(this, image);\n    } // check if completed\n\n\n    if (this.progressedCount === this.images.length) {\n      this.complete();\n    }\n\n    if (this.options.debug && console) {\n      console.log(`progress: ${message}`, image, elem);\n    }\n  };\n\n  ImagesLoaded.prototype.complete = function () {\n    let eventName = this.hasAnyBroken ? 'fail' : 'done';\n    this.isComplete = true;\n    this.emitEvent(eventName, [this]);\n    this.emitEvent('always', [this]);\n\n    if (this.jqDeferred) {\n      let jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n      this.jqDeferred[jqMethod](this);\n    }\n  }; // --------------------------  -------------------------- //\n\n\n  function LoadingImage(img) {\n    this.img = img;\n  }\n\n  LoadingImage.prototype = Object.create(EvEmitter.prototype);\n\n  LoadingImage.prototype.check = function () {\n    // If complete is true and browser supports natural sizes,\n    // try to check for image status manually.\n    let isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      // report based on naturalWidth\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      return;\n    } // If none of the checks above matched, simulate loading on detached element.\n\n\n    this.proxyImage = new Image(); // add crossOrigin attribute. #204\n\n    if (this.img.crossOrigin) {\n      this.proxyImage.crossOrigin = this.img.crossOrigin;\n    }\n\n    this.proxyImage.addEventListener('load', this);\n    this.proxyImage.addEventListener('error', this); // bind to image as well for Firefox. #191\n\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.proxyImage.src = this.img.currentSrc || this.img.src;\n  };\n\n  LoadingImage.prototype.getIsImageComplete = function () {\n    // check for non-zero, non-undefined naturalWidth\n    // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n    return this.img.complete && this.img.naturalWidth;\n  };\n\n  LoadingImage.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    let {\n      parentNode\n    } = this.img; // emit progress with parent <picture> or self <img>\n\n    let elem = parentNode.nodeName === 'PICTURE' ? parentNode : this.img;\n    this.emitEvent('progress', [this, elem, message]);\n  }; // ----- events ----- //\n  // trigger specified handler for event type\n\n\n  LoadingImage.prototype.handleEvent = function (event) {\n    let method = 'on' + event.type;\n\n    if (this[method]) {\n      this[method](event);\n    }\n  };\n\n  LoadingImage.prototype.onload = function () {\n    this.confirm(true, 'onload');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.onerror = function () {\n    this.confirm(false, 'onerror');\n    this.unbindEvents();\n  };\n\n  LoadingImage.prototype.unbindEvents = function () {\n    this.proxyImage.removeEventListener('load', this);\n    this.proxyImage.removeEventListener('error', this);\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  }; // -------------------------- Background -------------------------- //\n\n\n  function Background(url, element) {\n    this.url = url;\n    this.element = element;\n    this.img = new Image();\n  } // inherit LoadingImage prototype\n\n\n  Background.prototype = Object.create(LoadingImage.prototype);\n\n  Background.prototype.check = function () {\n    this.img.addEventListener('load', this);\n    this.img.addEventListener('error', this);\n    this.img.src = this.url; // check if image is already complete\n\n    let isComplete = this.getIsImageComplete();\n\n    if (isComplete) {\n      this.confirm(this.img.naturalWidth !== 0, 'naturalWidth');\n      this.unbindEvents();\n    }\n  };\n\n  Background.prototype.unbindEvents = function () {\n    this.img.removeEventListener('load', this);\n    this.img.removeEventListener('error', this);\n  };\n\n  Background.prototype.confirm = function (isLoaded, message) {\n    this.isLoaded = isLoaded;\n    this.emitEvent('progress', [this, this.element, message]);\n  }; // -------------------------- jQuery -------------------------- //\n\n\n  ImagesLoaded.makeJQueryPlugin = function (jQuery) {\n    jQuery = jQuery || window.jQuery;\n    if (!jQuery) return; // set local variable\n\n    $ = jQuery; // $().imagesLoaded()\n\n    $.fn.imagesLoaded = function (options, onAlways) {\n      let instance = new ImagesLoaded(this, options, onAlways);\n      return instance.jqDeferred.promise($(this));\n    };\n  }; // try making plugin\n\n\n  ImagesLoaded.makeJQueryPlugin(); // --------------------------  -------------------------- //\n\n  return ImagesLoaded;\n});","map":{"version":3,"sources":["/Users/eugene/Desktop/сайты/База/Лэндинги/unded-downloadable/unded/node_modules/imagesloaded/imagesloaded.js"],"names":["window","factory","module","exports","require","imagesLoaded","EvEmitter","$","jQuery","console","makeArray","obj","Array","isArray","isArrayLike","length","ImagesLoaded","elem","options","onAlways","queryElem","document","querySelectorAll","error","elements","Object","assign","on","getImages","jqDeferred","Deferred","setTimeout","check","bind","prototype","create","images","forEach","addElementImages","elementNodeTypes","nodeName","addImage","background","addElementBackgroundImages","nodeType","includes","childImgs","img","children","child","reURL","style","getComputedStyle","matches","exec","backgroundImage","url","addBackground","loadingImage","LoadingImage","push","Background","progressedCount","hasAnyBroken","complete","onProgress","image","message","progress","once","isLoaded","emitEvent","notify","debug","log","eventName","isComplete","jqMethod","getIsImageComplete","confirm","naturalWidth","proxyImage","Image","crossOrigin","addEventListener","src","currentSrc","parentNode","handleEvent","event","method","type","onload","unbindEvents","onerror","removeEventListener","element","makeJQueryPlugin","fn","instance","promise"],"mappings":"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","sourcesContent":["/*!\n * imagesLoaded v5.0.0\n * JavaScript is all like \"You images are done yet or what?\"\n * MIT License\n */\n\n( function( window, factory ) {\n  // universal module definition\n  if ( typeof module == 'object' && module.exports ) {\n    // CommonJS\n    module.exports = factory( window, require('ev-emitter') );\n  } else {\n    // browser global\n    window.imagesLoaded = factory( window, window.EvEmitter );\n  }\n\n} )( typeof window !== 'undefined' ? window : this,\n    function factory( window, EvEmitter ) {\n\nlet $ = window.jQuery;\nlet console = window.console;\n\n// -------------------------- helpers -------------------------- //\n\n// turn element or nodeList into an array\nfunction makeArray( obj ) {\n  // use object if already an array\n  if ( Array.isArray( obj ) ) return obj;\n\n  let isArrayLike = typeof obj == 'object' && typeof obj.length == 'number';\n  // convert nodeList to array\n  if ( isArrayLike ) return [ ...obj ];\n\n  // array of single index\n  return [ obj ];\n}\n\n// -------------------------- imagesLoaded -------------------------- //\n\n/**\n * @param {[Array, Element, NodeList, String]} elem\n * @param {[Object, Function]} options - if function, use as callback\n * @param {Function} onAlways - callback function\n * @returns {ImagesLoaded}\n */\nfunction ImagesLoaded( elem, options, onAlways ) {\n  // coerce ImagesLoaded() without new, to be new ImagesLoaded()\n  if ( !( this instanceof ImagesLoaded ) ) {\n    return new ImagesLoaded( elem, options, onAlways );\n  }\n  // use elem as selector string\n  let queryElem = elem;\n  if ( typeof elem == 'string' ) {\n    queryElem = document.querySelectorAll( elem );\n  }\n  // bail if bad element\n  if ( !queryElem ) {\n    console.error(`Bad element for imagesLoaded ${queryElem || elem}`);\n    return;\n  }\n\n  this.elements = makeArray( queryElem );\n  this.options = {};\n  // shift arguments if no options set\n  if ( typeof options == 'function' ) {\n    onAlways = options;\n  } else {\n    Object.assign( this.options, options );\n  }\n\n  if ( onAlways ) this.on( 'always', onAlways );\n\n  this.getImages();\n  // add jQuery Deferred object\n  if ( $ ) this.jqDeferred = new $.Deferred();\n\n  // HACK check async to allow time to bind listeners\n  setTimeout( this.check.bind( this ) );\n}\n\nImagesLoaded.prototype = Object.create( EvEmitter.prototype );\n\nImagesLoaded.prototype.getImages = function() {\n  this.images = [];\n\n  // filter & find items if we have an item selector\n  this.elements.forEach( this.addElementImages, this );\n};\n\nconst elementNodeTypes = [ 1, 9, 11 ];\n\n/**\n * @param {Node} elem\n */\nImagesLoaded.prototype.addElementImages = function( elem ) {\n  // filter siblings\n  if ( elem.nodeName === 'IMG' ) {\n    this.addImage( elem );\n  }\n  // get background image on element\n  if ( this.options.background === true ) {\n    this.addElementBackgroundImages( elem );\n  }\n\n  // find children\n  // no non-element nodes, #143\n  let { nodeType } = elem;\n  if ( !nodeType || !elementNodeTypes.includes( nodeType ) ) return;\n\n  let childImgs = elem.querySelectorAll('img');\n  // concat childElems to filterFound array\n  for ( let img of childImgs ) {\n    this.addImage( img );\n  }\n\n  // get child background images\n  if ( typeof this.options.background == 'string' ) {\n    let children = elem.querySelectorAll( this.options.background );\n    for ( let child of children ) {\n      this.addElementBackgroundImages( child );\n    }\n  }\n};\n\nconst reURL = /url\\((['\"])?(.*?)\\1\\)/gi;\n\nImagesLoaded.prototype.addElementBackgroundImages = function( elem ) {\n  let style = getComputedStyle( elem );\n  // Firefox returns null if in a hidden iframe https://bugzil.la/548397\n  if ( !style ) return;\n\n  // get url inside url(\"...\")\n  let matches = reURL.exec( style.backgroundImage );\n  while ( matches !== null ) {\n    let url = matches && matches[2];\n    if ( url ) {\n      this.addBackground( url, elem );\n    }\n    matches = reURL.exec( style.backgroundImage );\n  }\n};\n\n/**\n * @param {Image} img\n */\nImagesLoaded.prototype.addImage = function( img ) {\n  let loadingImage = new LoadingImage( img );\n  this.images.push( loadingImage );\n};\n\nImagesLoaded.prototype.addBackground = function( url, elem ) {\n  let background = new Background( url, elem );\n  this.images.push( background );\n};\n\nImagesLoaded.prototype.check = function() {\n  this.progressedCount = 0;\n  this.hasAnyBroken = false;\n  // complete if no images\n  if ( !this.images.length ) {\n    this.complete();\n    return;\n  }\n\n  /* eslint-disable-next-line func-style */\n  let onProgress = ( image, elem, message ) => {\n    // HACK - Chrome triggers event before object properties have changed. #83\n    setTimeout( () => {\n      this.progress( image, elem, message );\n    } );\n  };\n\n  this.images.forEach( function( loadingImage ) {\n    loadingImage.once( 'progress', onProgress );\n    loadingImage.check();\n  } );\n};\n\nImagesLoaded.prototype.progress = function( image, elem, message ) {\n  this.progressedCount++;\n  this.hasAnyBroken = this.hasAnyBroken || !image.isLoaded;\n  // progress event\n  this.emitEvent( 'progress', [ this, image, elem ] );\n  if ( this.jqDeferred && this.jqDeferred.notify ) {\n    this.jqDeferred.notify( this, image );\n  }\n  // check if completed\n  if ( this.progressedCount === this.images.length ) {\n    this.complete();\n  }\n\n  if ( this.options.debug && console ) {\n    console.log( `progress: ${message}`, image, elem );\n  }\n};\n\nImagesLoaded.prototype.complete = function() {\n  let eventName = this.hasAnyBroken ? 'fail' : 'done';\n  this.isComplete = true;\n  this.emitEvent( eventName, [ this ] );\n  this.emitEvent( 'always', [ this ] );\n  if ( this.jqDeferred ) {\n    let jqMethod = this.hasAnyBroken ? 'reject' : 'resolve';\n    this.jqDeferred[ jqMethod ]( this );\n  }\n};\n\n// --------------------------  -------------------------- //\n\nfunction LoadingImage( img ) {\n  this.img = img;\n}\n\nLoadingImage.prototype = Object.create( EvEmitter.prototype );\n\nLoadingImage.prototype.check = function() {\n  // If complete is true and browser supports natural sizes,\n  // try to check for image status manually.\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    // report based on naturalWidth\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    return;\n  }\n\n  // If none of the checks above matched, simulate loading on detached element.\n  this.proxyImage = new Image();\n  // add crossOrigin attribute. #204\n  if ( this.img.crossOrigin ) {\n    this.proxyImage.crossOrigin = this.img.crossOrigin;\n  }\n  this.proxyImage.addEventListener( 'load', this );\n  this.proxyImage.addEventListener( 'error', this );\n  // bind to image as well for Firefox. #191\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.proxyImage.src = this.img.currentSrc || this.img.src;\n};\n\nLoadingImage.prototype.getIsImageComplete = function() {\n  // check for non-zero, non-undefined naturalWidth\n  // fixes Safari+InfiniteScroll+Masonry bug infinite-scroll#671\n  return this.img.complete && this.img.naturalWidth;\n};\n\nLoadingImage.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  let { parentNode } = this.img;\n  // emit progress with parent <picture> or self <img>\n  let elem = parentNode.nodeName === 'PICTURE' ? parentNode : this.img;\n  this.emitEvent( 'progress', [ this, elem, message ] );\n};\n\n// ----- events ----- //\n\n// trigger specified handler for event type\nLoadingImage.prototype.handleEvent = function( event ) {\n  let method = 'on' + event.type;\n  if ( this[ method ] ) {\n    this[ method ]( event );\n  }\n};\n\nLoadingImage.prototype.onload = function() {\n  this.confirm( true, 'onload' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.onerror = function() {\n  this.confirm( false, 'onerror' );\n  this.unbindEvents();\n};\n\nLoadingImage.prototype.unbindEvents = function() {\n  this.proxyImage.removeEventListener( 'load', this );\n  this.proxyImage.removeEventListener( 'error', this );\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\n// -------------------------- Background -------------------------- //\n\nfunction Background( url, element ) {\n  this.url = url;\n  this.element = element;\n  this.img = new Image();\n}\n\n// inherit LoadingImage prototype\nBackground.prototype = Object.create( LoadingImage.prototype );\n\nBackground.prototype.check = function() {\n  this.img.addEventListener( 'load', this );\n  this.img.addEventListener( 'error', this );\n  this.img.src = this.url;\n  // check if image is already complete\n  let isComplete = this.getIsImageComplete();\n  if ( isComplete ) {\n    this.confirm( this.img.naturalWidth !== 0, 'naturalWidth' );\n    this.unbindEvents();\n  }\n};\n\nBackground.prototype.unbindEvents = function() {\n  this.img.removeEventListener( 'load', this );\n  this.img.removeEventListener( 'error', this );\n};\n\nBackground.prototype.confirm = function( isLoaded, message ) {\n  this.isLoaded = isLoaded;\n  this.emitEvent( 'progress', [ this, this.element, message ] );\n};\n\n// -------------------------- jQuery -------------------------- //\n\nImagesLoaded.makeJQueryPlugin = function( jQuery ) {\n  jQuery = jQuery || window.jQuery;\n  if ( !jQuery ) return;\n\n  // set local variable\n  $ = jQuery;\n  // $().imagesLoaded()\n  $.fn.imagesLoaded = function( options, onAlways ) {\n    let instance = new ImagesLoaded( this, options, onAlways );\n    return instance.jqDeferred.promise( $( this ) );\n  };\n};\n// try making plugin\nImagesLoaded.makeJQueryPlugin();\n\n// --------------------------  -------------------------- //\n\nreturn ImagesLoaded;\n\n} );\n"]},"metadata":{},"sourceType":"script"}